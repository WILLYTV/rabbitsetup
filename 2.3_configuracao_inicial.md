# 2.3 – Configuração Inicial do RabbitMQ

## Criação de Usuários e Papéis (Tags)

O RabbitMQ utiliza "tags" para definir papéis de usuários, como `administrator` (administração total), `monitoring` (somente leitura/monitoramento), entre outros. Não há grupos nativos, mas as tags cumprem esse papel.

### Exemplo: Usuários administrativos e de monitoramento
```bash
# Usuário admin (acesso total)
sudo rabbitmqctl add_user admin 'SenhaForte!123'
sudo rabbitmqctl set_user_tags admin administrator

# Usuário somente leitura (monitoramento)
sudo rabbitmqctl add_user viewer 'SenhaLeitura!123'
sudo rabbitmqctl set_user_tags viewer monitoring
```

## Criação de Virtual Hosts (vhosts)

Virtual hosts permitem isolar ambientes, aplicações ou times dentro do mesmo cluster RabbitMQ. Bons exemplos de uso:

```bash
# VHOST para produção
sudo rabbitmqctl add_vhost prod_app

# VHOST para homologação
sudo rabbitmqctl add_vhost staging_app

# VHOST para integração de sistemas
sudo rabbitmqctl add_vhost integracao
```

## Permissões por vhost

Defina permissões específicas para cada usuário em cada vhost:

```bash
# Permissões totais para admin em todos os vhosts
sudo rabbitmqctl set_permissions -p prod_app admin ".*" ".*" ".*"
sudo rabbitmqctl set_permissions -p staging_app admin ".*" ".*" ".*"
sudo rabbitmqctl set_permissions -p integracao admin ".*" ".*" ".*"

# Permissões de leitura para viewer apenas em produção
sudo rabbitmqctl set_permissions -p prod_app viewer "^$" ".*" ".*"
```

---

> **Dica:**
> - Use nomes de vhost que representem ambientes reais (ex: `prod_app`, `staging_app`, `integracao`).
> - Crie usuários com papéis distintos para separar administração de monitoramento.
> - Sempre defina permissões mínimas necessárias para cada usuário/vhost.
